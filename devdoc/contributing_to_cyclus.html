


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Guide for Contributing to Cyclus &mdash; Cyclus Home</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Cyclus Home" href="../index.html" />
    <link rel="up" title="Cyclus Developer Guide" href="main.html" />
    <link rel="prev" title="Use Cases for Cyclus Output Data" href="output_usecases.html" />
   
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12222727-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
  <a href="http://cyclus.github.com">
    <img src="../_static/logo1.png"/>
  </a>
</div>


    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="output_usecases.html" title="Use Cases for Cyclus Output Data"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Cyclus Home</a> &raquo;</li>
          <li><a href="main.html" accesskey="U">Cyclus Developer Guide</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Guide for Contributing to Cyclus</a><ul>
<li><a class="reference internal" href="#working-on-a-topic">Working on a Topic</a></li>
<li><a class="reference internal" href="#keeping-your-fork-up-to-date">Keeping Your Fork Up To Date</a></li>
<li><a class="reference internal" href="#passing-tests">Passing Tests</a></li>
<li><a class="reference internal" href="#making-a-pull-request">Making a Pull Request</a></li>
<li><a class="reference internal" href="#reviewing-a-pull-request">Reviewing a Pull Request</a></li>
<li><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="output_usecases.html"
                        title="previous chapter">Use Cases for Cyclus Output Data</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="guide-for-contributing-to-cyclus">
<h1>Guide for Contributing to Cyclus<a class="headerlink" href="#guide-for-contributing-to-cyclus" title="Permalink to this headline">¶</a></h1>
<p><em>Cyclus</em> has a number of projects under its umbrella.
The core <em>Cyclus</em> project repository is located at
<a class="reference external" href="http://github.com/cyclus/core">http://github.com/cyclus/core</a>. Additional projects found at
<a class="reference external" href="http://github.com/cyclus">http://github.com/cyclus</a> include :</p>
<blockquote>
<div><ul class="simple">
<li>Cycamore, the cyclus additional modules repository</li>
<li>Cyclopts, the cyclus optimization library</li>
<li>Cycic, the cyclus input controller</li>
<li>and more to come.</li>
</ul>
</div></blockquote>
<p>Although you do not have to register with github to
download and edit the code, if you desire your work to be integrated into the
cyclus mainline of development <em>you must fork the cyclus core repository into
your own github account and submit &#8216;Pull Requests&#8217;</em>.</p>
<div class="section" id="working-on-a-topic">
<h2>Working on a Topic<a class="headerlink" href="#working-on-a-topic" title="Permalink to this headline">¶</a></h2>
<p><em>Note that &#8220;upstream&#8221; repository refers to the primary `cyclus/core` repository.</em></p>
<p>You may find or create an issue report in a <em>Cyclus</em> repository that you would like
to solve.</p>
<p>You&#8217;ll first need to fork your repository and create a branch for the topic you&#8217;d
like you solve. As you do your development, push only to your own fork. Make a
pull request to the upstream repository (usually the &#8220;develop&#8221; branch) only after:</p>
<blockquote>
<div><ul class="simple">
<li>You have pulled the latest changes from the upstream repository.</li>
<li>You have completed a logical set of changes.</li>
<li>Cyclus compiles with no errors.</li>
<li>All tests pass.</li>
<li>Cyclus input files run as expected.</li>
<li>Your code has been reviewed by another developer.</li>
</ul>
</div></blockquote>
<p>Code from the &#8220;develop&#8221; branch generally must pass even more rigorous checks
before being integrated into the &#8220;master&#8221; branch. Hotfixes would be a
possible exception to this.</p>
</div>
<div class="section" id="keeping-your-fork-up-to-date">
<h2>Keeping Your Fork Up To Date<a class="headerlink" href="#keeping-your-fork-up-to-date" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first">Use a branching workflow similar to the one described at
<a class="reference external" href="http://progit.org/book/ch3-4.html">http://progit.org/book/ch3-4.html</a>.</p>
</li>
<li><p class="first">The &#8220;develop&#8221; branch is how core developers will share (generally compilable) progress
when we are not yet ready for the code to become &#8216;production&#8217;.</p>
</li>
<li><p class="first">Keep your own &#8220;master&#8221; and &#8220;develop&#8221; branches in sync with the upstream repository&#8217;s
&#8220;master&#8221; and &#8220;develop&#8221; branches. The master branch should always be the &#8216;stable&#8217;
or &#8216;production&#8217; release of cyclus.</p>
<blockquote>
<div><ul>
<li><p class="first">Pull the most recent history from the upstream repository &#8220;master&#8221;
and/or &#8220;develop&#8221; branches before you merge changes into your
corresponding local branch. Consider doing a rebase pull instead of
a regular pull or &#8216;fetch and merge&#8217;.  For example:</p>
<div class="highlight-python"><pre>git checkout develop
git pull --rebase upstream develop</pre>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">As you do development on topic branches in your own fork, consider rebasing
the topic branch onto the &#8220;master&#8221; and/or &#8220;develop&#8221;  branches after <em>pulls</em> from the upstream
repository rather than merging the pulled changes into your branch.  This
will help maintain a more linear (and clean) history.
<em>Please see caution about rebasing below</em>.  For example:</p>
<div class="highlight-python"><pre>git checkout [your topic branch]
git rebase develop</pre>
</div>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="passing-tests">
<h2>Passing Tests<a class="headerlink" href="#passing-tests" title="Permalink to this headline">¶</a></h2>
<p>To check that your branch passes the tests, you must build and install your topic
branch and then run the tests built during that process.</p>
<p>For the cyclus core, the tests are run using the CyclusUnitTestDriver (at the moment,
<tt class="docutils literal"><span class="pre">`make</span> <span class="pre">test`</span></tt> is insufficient). For example</p>
<div class="highlight-python"><pre>mkdir build
mkdir install
cd build
cmake ../src -DCMAKE_INSTALL_PREFIX=../install
make
make install
../install/cyclus/bin/CyclusUnitTestDriver</pre>
</div>
<p>The cycamore, the additional modules repository, the tests are run in an exactly
analogous way, but using the CycamoreUnitTestDriver. For example</p>
<div class="highlight-python"><pre>mkdir build
mkdir install
cd build
cmake ../src -DCMAKE_INSTALL_PREFIX=../install
make
make install
../install/cycamore/bin/CycamoreUnitTestDriver</pre>
</div>
<p>In addition to the CycamoreUnitTestDriver, a suite of input files can be run and
tested using the run_inputs.py script that is configured, built, and installed
with Cycamore. It relies on the input files that are part of your Cycamore
repository, and only succeeds for input files that are correct (some may have
known issues. See the issue list in cycamore for details.) To run the example
input files,</p>
<div class="highlight-python"><pre>python ../install/cycamore/bin/run_inputs.py</pre>
</div>
</div>
<div class="section" id="making-a-pull-request">
<h2>Making a Pull Request<a class="headerlink" href="#making-a-pull-request" title="Permalink to this headline">¶</a></h2>
<p>When you are ready to move changes from one of your topic branches into the
&#8220;develop&#8221; branch, it must be reviewed and accepted by another developer.</p>
<blockquote>
<div><ul class="simple">
<li>You may want to review this <a class="reference external" href="https://help.github.com/articles/using-pull-requests/">tutorial</a>
before you make a pull request to the develop branch.</li>
</ul>
</div></blockquote>
<p>Sometimes, your pull request will be closed by the reviewer until further
changes are made to appease the reviewer&#8217;s concerns. This may be frustrating,
but please act rationally, discuss the issues on the github space made for your
pull request, consult the <cite>style guide &lt;style_guide&gt;</cite>,
email the developer listhost for further advice, and make changes to your topic branch
accordingly. The pull request will be updated with those changes when you push them
to your fork.  When you think your request is ready for another review, you can
reopen the review yourself with the button made available to you.</p>
</div>
<div class="section" id="reviewing-a-pull-request">
<h2>Reviewing a Pull Request<a class="headerlink" href="#reviewing-a-pull-request" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first">Build, install, and test it. If you have added the remmote repository as
a remote you can check it out and merge it with the current develop
branch thusly,</p>
<div class="highlight-python"><pre>git checkout -b remote_name/branch_name
git merge develop</pre>
</div>
</li>
<li><p class="first">Look over the code.</p>
<ul class="simple">
<li>Check that it meets <a class="reference internal" href="style_guide.html"><em>our style guidelines</em></a>.</li>
<li>Make inline review comments concerning improvements.</li>
</ul>
</li>
<li><p class="first">Accept the Pull Request</p>
<ul>
<li><p class="first">In general, <strong>every commit</strong> (notice this is not &#8216;every push&#8217;) to the
&#8220;develop&#8221; and &#8220;master&#8221; branches should compile and pass tests. This
is guaranteed by using a NON-fast-forward merge during the pull request
acceptance process.</p>
</li>
<li><p class="first">The green &#8220;Merge Pull Request&#8221; button does a non-fast-forward merge by
default. However, if that button is unavailable, you&#8217;ve made minor
local changes to the pulled branch, or you just want to do it from the
command line, make sure your merge is a non-fast-forward merge. For example:</p>
<div class="highlight-python"><pre>git checkout develop
git merge --no-ff remote_name/branch_name -m "A message""</pre>
</div>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p>A good description of a git workflow with good graphics is available at
<a class="reference external" href="http://nvie.com/posts/a-successful-git-branching-model/">http://nvie.com/posts/a-successful-git-branching-model/</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="output_usecases.html" title="Use Cases for Cyclus Output Data"
             >previous</a> |</li>
        <li><a href="../index.html">Cyclus Home</a> &raquo;</li>
          <li><a href="main.html" >Cyclus Developer Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, University of Wisconsin Computational Nuclear Engineering Research Group.
      Last updated on Aug 15, 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>