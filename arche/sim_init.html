

<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Initialization and Restart &#8212; Home</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/cyclus.css?v=a0e5ed17" />
    <link rel="stylesheet" type="text/css" href="../_static/table_styling.css?v=a1a2a898" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script src="../_static/documentation_options.js?v=7558d08f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>

    
    
     
        <script src="../_static/jquery.cookie.js"></script>
    

    
     
        <script src="../_static/cloud.base.js"></script>
    

    
     
        <script src="../_static/cloud.js"></script>
    

    <link rel="icon" href="../_static/big_c.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Dynamic Loading Overview" href="dynamic_loading.html" />
    <link rel="prev" title="Archetype Command Line Interface" href="cli.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1"><script type="text/javascript">
var ga_enabled = !$.cookie('disable-ga');
if(ga_enabled){
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12222727-2']);
  _gaq.push(['_setCookiePath', '/']);
  _gaq.push(['_setDetectFlash', false]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
}
</script>
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="dynamic_loading.html" title="Dynamic Loading Overview"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="cli.html" title="Archetype Command Line Interface"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">Home</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U"><span style="font-variant:small-caps;">Cyclus</span> Archetype Developer Guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Initialization and Restart</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="initialization-and-restart">
<h1>Initialization and Restart<a class="headerlink" href="#initialization-and-restart" title="Link to this heading">¶</a></h1>
<p><span style="font-variant:small-caps;">Cyclus</span> has built-in functionality for simulation snapshotting and restart.
All simulations are initialized from the database.  In order to support
running from XML input files, the <span style="font-variant:small-caps;">Cyclus</span> kernel translates the input file
contents into the database and then initializes the simulation from the
database.  In order for this to work correctly, agents must be able to record
the entirety of their internal state to the database and able to restore that
state exactly.  The <code class="docutils literal notranslate"><span class="pre">cyclus::Agent</span></code> class provides a group of functions in
support of this functionality that must all be implemented carefully and
consistently. If possible, the <a class="reference internal" href="cycpp.html"><span class="doc">Cyclus preprocessor</span></a> should be
used to automate the generation of code for the following functions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">InfileToDb</span><span class="p">(</span><span class="n">InfileTree</span><span class="o">*</span><span class="w"> </span><span class="n">tree</span><span class="p">,</span><span class="w"> </span><span class="n">DbInit</span><span class="w"> </span><span class="n">di</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">InitFrom</span><span class="p">(</span><span class="n">cyclus</span><span class="o">::</span><span class="n">QueryableBackend</span><span class="o">*</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">InitInv</span><span class="p">(</span><span class="n">cyclus</span><span class="o">::</span><span class="n">Inventories</span><span class="o">&amp;</span><span class="w"> </span><span class="n">invs</span><span class="p">);</span>
<span class="n">cyclus</span><span class="o">::</span><span class="n">Inventories</span><span class="w"> </span><span class="nf">SnapshotInv</span><span class="p">();</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">Snapshot</span><span class="p">(</span><span class="n">cyclus</span><span class="o">::</span><span class="n">Agent</span><span class="o">*</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">schema</span><span class="p">();</span>
<span class="n">Json</span><span class="o">::</span><span class="n">Value</span><span class="w"> </span><span class="nf">annotations</span><span class="p">();</span>
<span class="n">cyclus</span><span class="o">::</span><span class="n">Agent</span><span class="o">*</span><span class="w"> </span><span class="nf">Clone</span><span class="p">();</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">InitFrom</span><span class="p">(</span><span class="n">cyclus</span><span class="o">::</span><span class="n">Agent</span><span class="o">*</span><span class="p">);</span>
</pre></div>
</div>
<p>When the preprocessor isn’t sufficient, read the <a class="reference external" href="http://fuelcycle.org/cyclus/api/classcyclus_1_1Agent.html">API documents</a> for the functions
listed above VERY CAREFULLY. There are also a few other functions related to
initialization that are important to understand well:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">Build</span><span class="p">(</span><span class="n">cyclus</span><span class="o">::</span><span class="n">Agent</span><span class="o">*</span><span class="w"> </span><span class="n">parent</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">EnterNotify</span><span class="p">();</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">BuildNotify</span><span class="p">(</span><span class="n">cyclus</span><span class="o">::</span><span class="n">Agent</span><span class="o">*</span><span class="w"> </span><span class="n">child</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">Decommission</span><span class="p">(</span><span class="n">cyclus</span><span class="o">::</span><span class="n">Agent</span><span class="o">*</span><span class="w"> </span><span class="n">child</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The functions mentioned on this page (except <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">InitFrom(cyclus::Agent*)</span></code>)
should NEVER be invoked directly by agents.</p>
</div>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="cli.html"
                          title="Previous page">&larr; Archetype Command Line Interface</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="dynamic_loading.html"
                          title="Next page">&rarr; Dynamic Loading Overview</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="dynamic_loading.html" title="Dynamic Loading Overview"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="cli.html" title="Archetype Command Line Interface"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">Home</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" ><span style="font-variant:small-caps;">Cyclus</span> Archetype Developer Guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Initialization and Restart</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2012-2024, University of Wisconsin Computational Nuclear Engineering Research Group.
      Last updated on Mar 22, 2024.
    </div><script type="text/javascript">
    if(ga_enabled){
        document.write("<div class=\"footer\">This page uses <a href=\"http://analytics.google.com\">Google Analytics</a> to collect statistics. ");
        document.write("Click <button title=\"set cookie to disable analytics for this site\" class=\"link\" onclick=\"$.cookie('disable-ga', 'true', {expires: 3650, path: '/'}); window.location.reload(); return false; \">here</button> to disable analytics for this site.");
        document.write("</div>");
    }else{
        document.write("<div class=\"footer\">Google Analytics has been disabled. ");
        document.write("Click <button title=\"set cookie to re-enable analytics for this site\" class=\"link\" onclick=\"$.cookie('disable-ga', null, {path: '/'}); window.location.reload(); return false; \">here</button> to re-enable analytics for this site.");
    };
</script>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>